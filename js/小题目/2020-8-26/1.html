<script>
    const p1 = () => {
        return new Promise((resolve, reject) => {
            setTimeout(() => {
                resolve(1)
            }, 1000);
        })
    }
    const p2 = () => {
        return new Promise((resolve, reject) => {
            setTimeout(() => {
                resolve(1)
            }, 2000);
        })
    }
    const p3 = () => {
        return new Promise((resolve, reject) => {
            setTimeout(() => {
                resolve(1)
            }, 3000);
        })
    }

    Promise.myAll = function (promises) {
        const arr = [];
        return new Promise((resolve, reject) => {
            let count = 0;//count === promise.length就结束了
            for (let i = 0; i < promises.length; i++) {
                const p = promises[i];
                p.then(r => {
                    count++;
                    arr[i] = r;
                    if (count === promises.length) {
                        resolve(arr)
                    }
                })
                p.catch(e => {

                })
            }
        })
    }

    Promise.myAll([p1(),p2(),p3()])
        .then(r => console.log(r))
</script>